CREATE TABLE field_types
(
    id   INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(255),
    CONSTRAINT pk_field_types PRIMARY KEY (id)
);

ALTER TABLE fields
    ADD type_id INTEGER;

ALTER TABLE fields
    ADD CONSTRAINT FK_FIELDS_ON_TYPE FOREIGN KEY (type_id) REFERENCES field_types (id);

ALTER TABLE fields
    DROP COLUMN type;